# -*- coding: UTF-8 -*-
####################################################################################################################
# Generated by Warband Module Decompiler
# All rights of the module belong to their respective owners
####################################################################################################################

from header_common import *
from ID_animations import *
from header_mission_templates import *
from header_tableau_materials import *
from header_items import *
from module_constants import *

####################################################################################################################
#  Each tableau material contains the following fields:
#  1) Tableau id (string): used for referencing tableaux in other files. The prefix tab_ is automatically added before each tableau-id.
#  2) Tableau flags (int). See header_tableau_materials.py for a list of available flags
#  3) Tableau sample material name (string).
#  4) Tableau width (int).
#  5) Tableau height (int).
#  6) Tableau mesh min x (int): divided by 1000 and used when a mesh is auto-generated using the tableau material
#  7) Tableau mesh min y (int): divided by 1000 and used when a mesh is auto-generated using the tableau material
#  8) Tableau mesh max x (int): divided by 1000 and used when a mesh is auto-generated using the tableau material
#  9) Tableau mesh max y (int): divided by 1000 and used when a mesh is auto-generated using the tableau material
#  10) Operations block (list): A list of operations. See header_operations.py for reference.
#     The operations block is executed when the tableau is activated.
# 
####################################################################################################################

tableaus = [
  ("game_character_sheet", 0, "tableau_with_transparency",  1024, 1024, 0, 0, 266, 532,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4287137928),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_camera_parameters, 0, 40, 40, 0, 100000),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (position_set_x, pos1, -20),
    (position_set_y, pos1, -20),
    (cur_tableau_add_tableau_mesh, "tableau_troop_character_color", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 200),
    (cur_tableau_add_tableau_mesh, "tableau_troop_character_alpha_mask", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 300),
  ]),

  ("game_inventory_window", 0, "tableau_with_transparency",  1024, 1024, 0, 0, 180, 270,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4287137928),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_camera_parameters, 0, 40, 40, 0, 100000),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (position_set_x, pos1, -20),
    (position_set_y, pos1, -20),
    (cur_tableau_add_tableau_mesh, "tableau_troop_inventory_color", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 200),
    (cur_tableau_add_tableau_mesh, "tableau_troop_inventory_alpha_mask", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 300),
  ]),

  ("game_profile_window", 0, "tableau_with_transparency",  1024, 1024, 0, 0, 320, 480,
  [
    (store_script_param, ":var0", 1),
    (assign, ":var1", ":var0"),
    (val_mod, ":var1", 2),
    (try_begin),
      (eq, ":var1", 0),
      (assign, ":var2", "trp_multiplayer_profile_troop_male"),
    (else_try),
      (assign, ":var2", "trp_multiplayer_profile_troop_female"),
    (try_end),
    (1503, ":var2"),
    (cur_tableau_set_background_color, 4287137928),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_camera_parameters, 0, 40, 40, 0, 100000),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (position_set_x, pos1, -20),
    (position_set_y, pos1, -20),
    (cur_tableau_add_tableau_mesh, "tableau_troop_profile_color", ":var2", pos1, 0, 0),
    (position_set_z, pos1, 200),
    (cur_tableau_add_tableau_mesh, "tableau_troop_profile_alpha_mask", ":var2", pos1, 0, 0),
  ]),

  ("game_party_window", 0, "tableau_with_transparency",  1024, 1024, 0, 0, 300, 300,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4287137928),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_camera_parameters, 0, 40, 40, 0, 100000),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (position_set_x, pos1, -20),
    (position_set_y, pos1, -20),
    (cur_tableau_add_tableau_mesh, "tableau_troop_party_color", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 200),
    (cur_tableau_add_tableau_mesh, "tableau_troop_party_alpha_mask", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 300),
  ]),

  ("game_troop_label_banner", 0, "tableau_with_transparency",  256, 256, -128, 0, 128, 256,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4287137928),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_camera_parameters, 0, 100, 100, 0, 100000),
    (init_position, pos1),
    (position_set_y, pos1, 136),
    (cur_tableau_add_mesh, ":var0", pos1, 132, 0),
  ]),

  ("round_shield_1", 0, "sample_shield_round_1",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 124),
    (cur_tableau_add_mesh, ":var0", pos1, 120, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_round_1", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 100, 0, 100000),
  ]),

  ("round_shield_2", 0, "sample_shield_matte",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 120),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_round_2", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 100, 0, 100000),
  ]),

  ("round_shield_3", 0, "sample_shield_matte",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 120),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_round_3", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 100, 0, 100000),
  ]),

  ("round_shield_4", 0, "sample_shield_matte",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 127),
    (cur_tableau_add_mesh, ":var0", pos1, 123, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_round_4", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 100, 0, 100000),
  ]),

  ("round_shield_5", 0, "sample_shield_matte",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 127),
    (cur_tableau_add_mesh, ":var0", pos1, 122, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_round_5", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 100, 0, 100000),
  ]),

  ("small_round_shield_1", 0, "sample_shield_small_round_1",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 131),
    (cur_tableau_add_mesh, ":var0", pos1, 127, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_small_round_1", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 100, 0, 100000),
  ]),

  ("small_round_shield_2", 0, "sample_shield_small_round_2",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 131),
    (cur_tableau_add_mesh, ":var0", pos1, 127, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_small_round_2", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 100, 0, 100000),
  ]),

  ("small_round_shield_3", 0, "sample_shield_matte",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 131),
    (cur_tableau_add_mesh, ":var0", pos1, 127, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_small_round_3", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 100, 0, 100000),
  ]),

  ("kite_shield_1", 0, "sample_shield_matte",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -59),
    (position_set_y, pos1, 140),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_kite_1", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("kite_shield_2", 0, "sample_shield_matte",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -58),
    (position_set_y, pos1, 140),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_kite_2", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("kite_shield_3", 0, "sample_shield_matte",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -58),
    (position_set_y, pos1, 140),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_kite_3", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("kite_shield_4", 0, "sample_shield_matte",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 160),
    (cur_tableau_add_mesh, ":var0", pos1, 120, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_kite_4", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("heater_shield_1", 0, "sample_shield_matte",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -58),
    (position_set_y, pos1, 151),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_heater_1", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("heater_shield_2", 0, "sample_shield_matte",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -50),
    (position_set_y, pos1, 150),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_heater_2", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("pavise_shield_1", 0, "sample_shield_matte",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -54),
    (position_set_y, pos1, 120),
    (cur_tableau_add_mesh, ":var0", pos1, 118, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_pavise_1", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("pavise_shield_2", 0, "sample_shield_matte",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (position_set_x, pos1, -54),
    (position_set_y, pos1, 120),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_shield_pavise_2", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("heraldic_armor_a", 0, "sample_heraldic_armor_a",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (store_sub, ":var1", ":var0", "mesh_arms_a01"),
    (troop_get_slot, ":var2", "trp_banner_background_color_array", ":var1"),
    (cur_tableau_set_background_color, ":var2"),
    (init_position, pos1),
    (cur_tableau_add_mesh_with_vertex_color, "mesh_heraldic_armor_bg", pos1, 200, 100, ":var2"),
    (init_position, pos1),
    (position_set_z, pos1, 50),
    (position_set_x, pos1, -26),
    (position_set_y, pos1, 128),
    (cur_tableau_add_mesh, ":var0", pos1, 98, 0),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_heraldic_armor_a", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("heraldic_armor_b", 0, "sample_heraldic_armor_b",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (store_sub, ":var1", ":var0", "mesh_arms_a01"),
    (troop_get_slot, ":var2", "trp_banner_background_color_array", ":var1"),
    (cur_tableau_set_background_color, ":var2"),
    (init_position, pos1),
    (cur_tableau_add_mesh_with_vertex_color, "mesh_heraldic_armor_bg", pos1, 200, 100, ":var2"),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (position_set_x, pos1, -4),
    (position_set_y, pos1, 154),
    (cur_tableau_add_mesh, ":var0", pos1, 116, 0),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_heraldic_armor_b", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("heraldic_armor_c", 0, "sample_heraldic_armor_c",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (store_sub, ":var1", ":var0", "mesh_arms_a01"),
    (troop_get_slot, ":var2", "trp_banner_background_color_array", ":var1"),
    (cur_tableau_set_background_color, ":var2"),
    (init_position, pos1),
    (cur_tableau_add_mesh_with_vertex_color, "mesh_heraldic_armor_bg", pos1, 200, 100, ":var2"),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (position_set_x, pos1, -1),
    (position_set_y, pos1, 155),
    (cur_tableau_add_mesh, ":var0", pos1, 115, 0),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_heraldic_armor_c", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("heraldic_armor_d", 0, "sample_heraldic_armor_d",  512, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (store_sub, ":var1", ":var0", "mesh_arms_a01"),
    (troop_get_slot, ":var2", "trp_banner_background_color_array", ":var1"),
    (cur_tableau_set_background_color, ":var2"),
    (init_position, pos1),
    (cur_tableau_add_mesh_with_vertex_color, "mesh_heraldic_armor_bg", pos1, 200, 100, ":var2"),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (position_set_x, pos1, 0),
    (position_set_y, pos1, 155),
    (cur_tableau_add_mesh, ":var0", pos1, 115, 0),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_heraldic_armor_d", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("plate_harness_heraldic", 0, "sample_platemail_banner",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (store_sub, ":var1", ":var0", "mesh_arms_a01"),
    (troop_get_slot, ":var2", "trp_banner_background_color_array", ":var1"),
    (cur_tableau_set_background_color, ":var2"),
    (init_position, pos1),
    (cur_tableau_add_mesh_with_vertex_color, "mesh_heraldic_armor_bg", pos1, 200, 100, ":var2"),
    (init_position, pos1),
    (position_set_z, pos1, 50),
    (position_set_x, pos1, -66),
    (position_set_y, pos1, 22),
    (cur_tableau_add_mesh, ":var0", pos1, 87, 0),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_platemail_banner", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("platemail_harness_heraldic", 0, "sample_platemail_banner",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (store_sub, ":var1", ":var0", "mesh_arms_a01"),
    (troop_get_slot, ":var2", "trp_banner_background_color_array", ":var1"),
    (cur_tableau_set_background_color, ":var2"),
    (init_position, pos1),
    (cur_tableau_add_mesh_with_vertex_color, "mesh_heraldic_armor_bg", pos1, 200, 100, ":var2"),
    (init_position, pos1),
    (position_set_z, pos1, 50),
    (position_set_x, pos1, -66),
    (position_set_y, pos1, 91),
    (cur_tableau_add_mesh, ":var0", pos1, 87, 0),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_platemail_banner", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("early_transitional_heraldic", 0, "sample_early_transitional_heraldic_banner",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (store_sub, ":var1", ":var0", "mesh_arms_a01"),
    (troop_get_slot, ":var2", "trp_banner_background_color_array", ":var1"),
    (cur_tableau_set_background_color, ":var2"),
    (init_position, pos1),
    (cur_tableau_add_mesh_with_vertex_color, "mesh_heraldic_armor_bg", pos1, 200, 100, ":var2"),
    (init_position, pos1),
    (position_set_x, pos1, 17),
    (position_set_y, pos1, 150),
    (cur_tableau_add_mesh, ":var0", pos1, 90, 0),
    (init_position, pos1),
    (position_set_z, pos1, 30),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_early_transitional_heraldic_banner", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 200, 200, 0, 100000),
  ]),

  ("troop_note_alpha_mask", 0, "mat_troop_portrait_mask",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 8947848),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (cur_tableau_render_as_alpha_mask),
    (call_script, "script_add_troop_to_cur_tableau", ":var0"),
  ]),

  ("troop_note_color", 0, "mat_troop_portrait_color",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4291214228),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (call_script, "script_add_troop_to_cur_tableau", ":var0"),
  ]),

  ("troop_character_alpha_mask", 0, "mat_troop_portrait_mask",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 8947848),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (cur_tableau_render_as_alpha_mask),
    (call_script, "script_add_troop_to_cur_tableau_for_character", ":var0"),
  ]),

  ("troop_character_color", 0, "mat_troop_portrait_color",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4292923313),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (call_script, "script_add_troop_to_cur_tableau_for_character", ":var0"),
  ]),

  ("troop_inventory_alpha_mask", 0, "mat_troop_portrait_mask",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 8947848),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (cur_tableau_render_as_alpha_mask),
    (call_script, "script_add_troop_to_cur_tableau_for_inventory", ":var0"),
  ]),

  ("troop_inventory_color", 0, "mat_troop_portrait_color",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4285159482),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (call_script, "script_add_troop_to_cur_tableau_for_inventory", ":var0"),
  ]),

  ("troop_profile_alpha_mask", 0, "mat_troop_portrait_mask",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 8947848),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (cur_tableau_render_as_alpha_mask),
    (call_script, "script_add_troop_to_cur_tableau_for_profile", ":var0"),
  ]),

  ("troop_profile_color", 0, "mat_troop_portrait_color",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4294567848),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (call_script, "script_add_troop_to_cur_tableau_for_profile", ":var0"),
  ]),

  ("troop_party_alpha_mask", 0, "mat_troop_portrait_mask",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 8947848),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (cur_tableau_render_as_alpha_mask),
    (call_script, "script_add_troop_to_cur_tableau_for_party", ":var0"),
  ]),

  ("troop_party_color", 0, "mat_troop_portrait_color",  1024, 1024, 0, 0, 400, 400,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4290681970),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (call_script, "script_add_troop_to_cur_tableau_for_party", ":var0"),
  ]),

  ("troop_note_mesh", 0, "tableau_with_transparency",  1024, 1024, 0, 0, 350, 350,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4287137928),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_camera_parameters, 0, 40, 40, 0, 100000),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (position_set_x, pos1, -20),
    (position_set_y, pos1, -20),
    (cur_tableau_add_tableau_mesh, "tableau_troop_note_color", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 200),
    (cur_tableau_add_tableau_mesh, "tableau_troop_note_alpha_mask", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 300),
    (cur_tableau_add_mesh, "mesh_portrait_blend_out", pos1, 0, 0),
  ]),

  ("center_note_mesh", 0, "tableau_with_transparency",  1024, 1024, 0, 0, 200, 200,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_background_color, 8947848),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (init_position, pos8),
    (position_set_x, pos8, -210),
    (position_set_y, pos8, 200),
    (position_set_z, pos8, 300),
    (cur_tableau_add_point_light, pos8, 550, 500, 450),
    (cur_tableau_set_camera_parameters, 1, 10, 10, 10, 10000),
    (init_position, pos1),
    (position_set_z, pos1, 0),
    (position_set_z, pos1, -500),
    (init_position, pos1),
    (position_set_y, pos1, -100),
    (position_set_x, pos1, -100),
    (position_set_z, pos1, 100),
    (position_rotate_z, pos1, 200),
    (party_get_icon, ":var1", ":var0"),
    (try_begin),
      (ge, ":var1", 0),
      (cur_tableau_add_map_icon, ":var1", pos1, 0),
    (try_end),
    (init_position, pos5),
    (position_set_x, pos5, -90),
    (position_set_z, pos5, 500),
    (position_set_y, pos5, 480),
    (position_rotate_x, pos5, -90),
    (position_rotate_z, pos5, 180),
    (position_rotate_x, pos5, -35),
    (cur_tableau_set_camera_position, pos5),
  ]),

  ("faction_note_mesh_for_menu", 0, "pic_arms_swadian",  1024, 512, 0, 0, 450, 225,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4294967295),
    (set_fixed_point_multiplier, 100),
    (try_begin),
      (is_between, ":var0", "fac_kingdom_1", "fac_kingdoms_end"),
      (store_add, ":var1", "mesh_pic_arms_swadian", ":var0"),
      (val_sub, ":var1", "fac_kingdom_1"),
      (init_position, pos1),
      (position_set_y, pos1, -5),
      (position_set_x, pos1, -45),
      (cur_tableau_add_mesh, ":var1", pos1, 0, 0),
      (cur_tableau_set_camera_parameters, 0, 160, 80, 0, 100000),
    (try_end),
  ]),

  ("faction_note_mesh", 0, "pic_arms_swadian",  1024, 512, 0, 0, 500, 250,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4294967295),
    (set_fixed_point_multiplier, 100),
    (try_begin),
      (is_between, ":var0", "fac_kingdom_1", "fac_kingdoms_end"),
      (store_add, ":var1", "mesh_pic_arms_swadian", ":var0"),
      (val_sub, ":var1", "fac_kingdom_1"),
      (init_position, pos1),
      (position_set_y, pos1, -5),
      (cur_tableau_add_mesh, ":var1", pos1, 0, 0),
      (cur_tableau_set_camera_parameters, 0, 100, 50, 0, 100000),
    (try_end),
  ]),

  ("faction_note_mesh_banner", 0, "tableau_with_transparency",  1024, 1024, 0, 0, 200, 200,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (try_begin),
      (faction_get_slot, ":var1", ":var0", 11),
      (ge, ":var1", 0),
      (troop_get_slot, ":var2", ":var1", 13),
      (store_add, ":var3", "spr_banner_f21", 1),
      (is_between, ":var2", "spr_banner_a", ":var3"),
      (val_sub, ":var2", "spr_banner_a"),
      (store_add, ":var4", ":var2", "mesh_banner_a01"),
      (init_position, pos1),
      (position_set_y, pos1, 100),
      (cur_tableau_add_mesh, ":var4", pos1, 0, 0),
      (cur_tableau_set_camera_parameters, 0, 210, 210, 0, 100000),
    (try_end),
  ]),

  ("2_factions_mesh", 0, "tableau_with_transparency",  1024, 1024, 0, 0, 200, 200,
  [
    (store_script_param, ":var0", 1),
    (store_mod, ":var1", ":var0", 128),
    (val_div, ":var0", 128),
    (val_add, ":var0", "fac_player_supporters_faction"),
    (val_add, ":var1", "fac_player_supporters_faction"),
    (set_fixed_point_multiplier, 100),
    (try_begin),
      (faction_get_slot, ":var2", ":var0", 11),
      (ge, ":var2", 0),
      (troop_get_slot, ":var3", ":var2", 13),
      (store_add, ":var4", "spr_banner_f21", 1),
      (is_between, ":var3", "spr_banner_a", ":var4"),
      (val_sub, ":var3", "spr_banner_a"),
      (store_add, ":var5", ":var3", "mesh_banner_a01"),
      (init_position, pos1),
      (position_set_x, pos1, -50),
      (position_set_y, pos1, 100),
      (cur_tableau_add_mesh, ":var5", pos1, 0, 0),
    (try_end),
    (try_begin),
      (faction_get_slot, ":var2", ":var1", 11),
      (ge, ":var2", 0),
      (troop_get_slot, ":var3", ":var2", 13),
      (store_add, ":var4", "spr_banner_f21", 1),
      (is_between, ":var3", "spr_banner_a", ":var4"),
      (val_sub, ":var3", "spr_banner_a"),
      (store_add, ":var5", ":var3", "mesh_banner_a01"),
      (init_position, pos1),
      (position_set_x, pos1, 50),
      (position_set_y, pos1, 100),
      (cur_tableau_add_mesh, ":var5", pos1, 0, 0),
    (try_end),
    (cur_tableau_set_camera_parameters, 0, 210, 210, 0, 100000),
  ]),

  ("color_picker", 0, "missiles",  32, 32, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (init_position, pos1),
    (cur_tableau_add_mesh, "mesh_color_picker", pos1, 0, 0),
    (position_move_z, pos1, 1),
    (position_move_x, pos1, -2),
    (position_move_y, pos1, -2),
    (cur_tableau_add_mesh_with_vertex_color, "mesh_white_plane", pos1, 200, 0, ":var0"),
    (cur_tableau_set_camera_parameters, 0, 20, 20, 0, 100000),
  ]),

  ("custom_banner_square_no_mesh", 0, "missiles",  512, 512, 0, 0, 300, 300,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (call_script, "script_draw_banner_to_region", ":var0", 0, 0, 10000, 10000, 9800, 9800, 10000, 10000, 0),
    (cur_tableau_set_camera_parameters, 0, 100, 100, 0, 100000),
  ]),

  ("custom_banner_default", 0, "missiles",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (call_script, "script_draw_banner_to_region", ":var0", -9, -2, 7450, 19400, 7200, 18000, 9000, 10000, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_custom_banner", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 100, 200, 0, 100000),
  ]),

  ("custom_banner_tall", 0, "missiles",  512, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (call_script, "script_draw_banner_to_region", ":var0", -9, 12, 8250, 18000, 8000, 21000, 10000, 10000, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_custom_banner", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 100, 200, 0, 100000),
  ]),

  ("custom_banner_square", 0, "missiles",  256, 256, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (call_script, "script_draw_banner_to_region", ":var0", -11, 10, 7700, 7700, 7500, 7500, 8300, 10000, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_custom_banner_square", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 100, 100, 0, 100000),
  ]),

  ("custom_banner_short", 0, "missiles",  256, 512, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (call_script, "script_draw_banner_to_region", ":var0", -10, 0, 8050, 5000, 4200, 4800, 6600, 10000, 0),
    (init_position, pos1),
    (position_set_z, pos1, 10),
    (cur_tableau_add_mesh, "mesh_tableau_mesh_custom_banner_short", pos1, 0, 0),
    (cur_tableau_set_camera_parameters, 0, 100, 50, 0, 100000),
  ]),

  ("background_selection", 0, "missiles",  512, 512, 0, 0, 100, 100,
  [
    (store_script_param, ":var0", 1),
    (troop_get_slot, ":var1", "trp_player", 91),
    (troop_set_slot, "trp_player", 91, ":var0"),
    (set_fixed_point_multiplier, 100),
    (call_script, "script_draw_banner_to_region", "trp_player", 0, 0, 10000, 10000, 9800, 9800, 10000, 10000, 0),
    (cur_tableau_set_camera_parameters, 0, 100, 100, 0, 100000),
    (troop_set_slot, "trp_player", 91, ":var1"),
  ]),

  ("positioning_selection", 0, "missiles",  512, 512, 0, 0, 100, 100,
  [
    (store_script_param, ":var0", 1),
    (troop_get_slot, ":var1", "trp_player", 98),
    (troop_set_slot, "trp_player", 98, ":var0"),
    (set_fixed_point_multiplier, 100),
    (call_script, "script_draw_banner_to_region", "trp_player", 0, 0, 10000, 10000, 9800, 9800, 10000, 10000, 0),
    (cur_tableau_set_camera_parameters, 0, 100, 100, 0, 100000),
    (troop_set_slot, "trp_player", 98, ":var1"),
  ]),

  ("achievement_troop", 0, "troop_portrait",  1024, 1024, 0, 0, 600, 600,
  [
    (store_script_param, ":var0", 1),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_background_color, 0),
    (cur_tableau_set_ambient_light, 100, 100, 100),
    (init_position, pos8),
    (position_set_x, pos8, -210),
    (position_set_y, pos8, 200),
    (position_set_z, pos8, 300),
    (cur_tableau_add_point_light, pos8, 550, 500, 450),
    (cur_tableau_set_override_flags, 511),
    (troop_get_type, ":var1", "trp_player"),
    (try_begin),
      (eq, ":var0", 0),
      (try_begin),
        (ge, ":var1", 1),
      (try_end),
      (cur_tableau_add_override_item, "itm_hide_boots"),
      (cur_tableau_add_override_item, "itm_two_handed_battle_axe_2"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 1),
      (cur_tableau_add_override_item, "itm_noldor_capt_helm"),
      (try_begin),
        (ge, ":var1", 1),
        (cur_tableau_add_override_item, "itm_noldor_female_armor"),
      (else_try),
        (cur_tableau_add_override_item, "itm_noldor_ranger_garb"),
      (try_end),
      (cur_tableau_add_override_item, "itm_noldor_boots"),
      (cur_tableau_add_override_item, "itm_noldor_longsword"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 2),
      (cur_tableau_add_override_item, "itm_noldor_knight_helm"),
      (cur_tableau_add_override_item, "itm_noldor_rune_armor"),
      (cur_tableau_add_override_item, "itm_mail_boots"),
      (cur_tableau_add_override_item, "itm_gauntlets_normal"),
      (cur_tableau_add_override_item, "itm_noldor_runesword"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 3),
      (cur_tableau_add_override_item, "itm_dshar_armor_noble_scale"),
      (cur_tableau_add_override_item, "itm_dshar_dueling_armor"),
      (cur_tableau_add_override_item, "itm_splinted_greaves"),
      (cur_tableau_add_override_item, "itm_scale_gauntlets"),
      (cur_tableau_add_override_item, "itm_strange_great_sword"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 4),
      (cur_tableau_add_override_item, "itm_helmet_hounskull_bascinet_open_b"),
      (cur_tableau_add_override_item, "itm_royal_platemail"),
      (cur_tableau_add_override_item, "itm_greaves_polished_plate"),
      (cur_tableau_add_override_item, "itm_gauntlets_normal"),
      (cur_tableau_add_override_item, "itm_knight_war_axe"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 5),
      (cur_tableau_add_override_item, "itm_jatu_noble_armor"),
      (cur_tableau_add_override_item, "itm_greaves_empire_consul"),
      (cur_tableau_add_override_item, "itm_gauntlets_normal"),
      (cur_tableau_add_override_item, "itm_noldor_longsword"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 6),
      (assign, ":var2", "anim_"),
      (cur_tableau_add_override_item, "itm_shadow_legion_armor"),
      (cur_tableau_add_override_item, "itm_greaves_shadow_legion"),
      (cur_tableau_add_override_item, "itm_gauntlets_normal"),
      (cur_tableau_add_override_item, "itm_empire_broadsword"),
    (else_try),
      (eq, ":var0", 7),
      (cur_tableau_add_override_item, "itm_dark_chain_armor"),
      (cur_tableau_add_override_item, "itm_leather_boots"),
      (cur_tableau_add_override_item, "itm_leather_gloves"),
      (cur_tableau_add_override_item, "itm_two_handed_axe"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 8),
      (cur_tableau_add_override_item, "itm_anaconda_plate"),
      (cur_tableau_add_override_item, "itm_greaves_heavy_plate"),
      (cur_tableau_add_override_item, "itm_mail_mittens"),
      (cur_tableau_add_override_item, "itm_war_spear"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 9),
      (cur_tableau_add_override_item, "itm_jatu_raider_armor"),
      (cur_tableau_add_override_item, "itm_greaves_soft_soled_plate"),
      (cur_tableau_add_override_item, "itm_scale_gauntlets"),
      (cur_tableau_add_override_item, "itm_strange_sword"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 10),
      (cur_tableau_add_override_item, "itm_demonskin"),
      (cur_tableau_add_override_item, "itm_black_greaves"),
      (cur_tableau_add_override_item, "itm_gauntlets_normal"),
      (cur_tableau_add_override_item, "itm_ebony_bastard_sword"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 11),
      (cur_tableau_add_override_item, "itm_arena_tunic_green"),
      (cur_tableau_add_override_item, "itm_hide_boots"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 12),
      (cur_tableau_add_override_item, "itm_arena_armor_red"),
      (cur_tableau_add_override_item, "itm_hide_boots"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 13),
      (try_begin),
        (eq, ":var1", 1),
        (cur_tableau_add_override_item, "itm_fierd_valk_surcoat"),
      (else_try),
        (cur_tableau_add_override_item, "itm_plate_studded_pauldron"),
      (try_end),
      (cur_tableau_add_override_item, "itm_greaves_polished_plate"),
      (cur_tableau_add_override_item, "itm_gauntlets_normal"),
      (cur_tableau_add_override_item, "itm_ebony_bastard_sword"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 14),
      (cur_tableau_add_override_item, "itm_helmet_hounskull_sarleon_open"),
      (cur_tableau_add_override_item, "itm_plate_armor_lion1"),
      (cur_tableau_add_override_item, "itm_greaves_polished_plate"),
      (cur_tableau_add_override_item, "itm_mail_mittens"),
      (cur_tableau_add_override_item, "itm_bastard_sword_b"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 15),
      (cur_tableau_add_override_item, "itm_dawn_plate"),
      (cur_tableau_add_override_item, "itm_greaves_polished_plate"),
      (cur_tableau_add_override_item, "itm_gauntlets_normal"),
      (cur_tableau_add_override_item, "itm_claymore"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 16),
      (cur_tableau_add_override_item, "itm_royal_crown"),
      (cur_tableau_add_override_item, "itm_burnished_heavy_armor"),
      (cur_tableau_add_override_item, "itm_black_greaves"),
      (cur_tableau_add_override_item, "itm_gauntlets_normal"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 17),
      (try_begin),
        (eq, ":var1", 1),
        (cur_tableau_add_override_item, "itm_sing_temptress_armor"),
      (else_try),
        (cur_tableau_add_override_item, "itm_dshar_clothing2"),
        (cur_tableau_add_override_item, "itm_leather_gloves"),
      (try_end),
      (cur_tableau_add_override_item, "itm_greaves_soft_soled_plate"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 18),
      (try_begin),
        (eq, ":var1", 1),
        (cur_tableau_add_override_item, "itm_fur_lined_coat_over_armor"),
      (else_try),
        (cur_tableau_add_override_item, "itm_dshar_clothing1"),
      (try_end),
      (cur_tableau_add_override_item, "itm_woolen_hose"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 19),
      (cur_tableau_add_override_item, "itm_gold_purple_clothing1"),
      (cur_tableau_add_override_item, "itm_light_leather_boots"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 20),
      (try_begin),
        (eq, ":var1", 1),
        (cur_tableau_add_override_item, "itm_headcloth"),
        (cur_tableau_add_override_item, "itm_dress"),
      (else_try),
        (cur_tableau_add_override_item, "itm_felt_hat"),
        (cur_tableau_add_override_item, "itm_coarse_tunic"),
      (try_end),
      (cur_tableau_add_override_item, "itm_wrapping_boots"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 21),
      (cur_tableau_add_override_item, "itm_woolen_dress"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 22),
      (cur_tableau_add_override_item, "itm_leather_jacket"),
      (cur_tableau_add_override_item, "itm_hide_boots"),
      (cur_tableau_add_override_item, "itm_sword_medieval_c"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 23),
      (cur_tableau_add_override_item, "itm_ragged_outfit"),
      (cur_tableau_add_override_item, "itm_hunter_boots"),
      (cur_tableau_add_override_item, "itm_butchering_knife"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 24),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 25),
      (troop_get_slot, ":var3", "trp_player", 162),
      (try_for_range, ":var4", 5, 8),
        (troop_get_inventory_slot, ":var5", ":var3", ":var4"),
        (try_begin),
          (ge, ":var5", 0),
          (cur_tableau_add_override_item, ":var5"),
        (try_end),
      (try_end),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 100),
      (assign, ":var6", 526),
      (cur_tableau_set_override_flags, ":var6"),
      (assign, ":var2", "anim_"),
    (else_try),
      (eq, ":var0", 101),
      (faction_get_slot, ":var7", "$g_notification_menu_var1", 68),
      (try_for_range, ":var4", 5, 8),
        (troop_get_inventory_slot, ":var5", ":var7", ":var4"),
        (try_begin),
          (ge, ":var5", 0),
          (try_begin),
            (eq, ":var5", "itm_falcon_plate"),
            (assign, ":var5", "itm_plate_harness_white"),
          (try_end),
          (cur_tableau_add_override_item, ":var5"),
        (try_end),
      (try_end),
      (assign, ":var2", "anim_"),
    (else_try),
      (assign, ":var2", "anim_"),
    (try_end),
    (init_position, pos2),
    (cur_tableau_set_camera_parameters, 1, 6, 6, 10, 10000),
    (init_position, pos5),
    (position_set_z, pos5, 96),
    (position_set_y, pos5, 350),
    (try_begin),
      (eq, ":var0", 101),
      (party_get_slot, ":var8", "$g_notification_menu_var2", 7),
      (cur_tableau_add_troop, ":var8", pos2, "anim_", 0),
    (else_try),
      (store_attribute_level, ":var9", "trp_player", ca_strength),
      (troop_raise_attribute, "trp_player", ca_strength, 100),
      (cur_tableau_add_troop, "trp_player", pos2, ":var2", 0),
      (troop_raise_attribute, "trp_player", ca_strength, -1000),
      (troop_raise_attribute, "trp_player", ca_strength, ":var9"),
    (try_end),
    (position_rotate_x, pos5, -90),
    (position_rotate_z, pos5, 180),
    (cur_tableau_set_camera_position, pos5),
  ]),

  ("group_companions", 0, "troop_portrait",  1024, 1024, 0, 0, 1000, 1000,
  [
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_background_color, 0),
    (cur_tableau_set_ambient_light, 100, 100, 100),
    (init_position, pos8),
    (position_set_x, pos8, -210),
    (position_set_y, pos8, 200),
    (position_set_z, pos8, 300),
    (cur_tableau_add_point_light, pos8, 550, 500, 450),
    (cur_tableau_set_override_flags, 16),
    (cur_tableau_set_camera_parameters, 1, 9, 9, 10, 10000),
    (init_position, pos1),
    (position_set_x, pos1, 0),
    (position_set_y, pos1, 0),
    (position_set_z, pos1, 0),
    (troop_get_inventory_slot, ":var0", "trp_player", ek_horse),
    (try_begin),
      (gt, ":var0", 0),
      (cur_tableau_add_horse, ":var0", pos1, "anim_", 0),
      (cur_tableau_add_troop, "trp_player", pos1, "anim_", 0),
    (else_try),
      (cur_tableau_add_troop, "trp_player", pos1, "anim_", 0),
    (try_end),
    (party_get_num_companion_stacks, ":var1", "p_main_party"),
    (val_min, ":var1", 5),
    (try_for_range, ":var2", 1, ":var1"),
      (party_stack_get_troop_id, ":var3", "p_main_party", ":var2"),
      (try_begin),
        (is_between, ":var3", "trp_npc_adonja", "trp_kingdom_1_lord"),
        (cur_tableau_set_override_flags, 16),
        (assign, ":var4", 0),
      (else_try),
        (cur_tableau_set_override_flags, 0),
        (store_mul, ":var4", ":var3", 126233),
        (val_mod, ":var4", 1000),
        (val_add, ":var4", 1),
      (try_end),
      (store_mod, ":var5", ":var2", 2),
      (val_mul, ":var5", 2),
      (val_sub, ":var5", 1),
      (store_add, ":var6", ":var2", 1),
      (val_div, ":var6", 2),
      (val_mul, ":var6", 110),
      (val_mul, ":var6", ":var5"),
      (init_position, pos2),
      (position_set_x, pos2, ":var6"),
      (position_set_y, pos2, -100),
      (troop_get_inventory_slot, ":var0", ":var3", ek_horse),
      (try_begin),
        (gt, ":var0", 0),
        (cur_tableau_add_horse, ":var0", pos2, "anim_", 0),
        (cur_tableau_add_troop, ":var3", pos2, "anim_", ":var4"),
      (else_try),
        (cur_tableau_add_troop, ":var3", pos2, "anim_", ":var4"),
      (try_end),
    (try_end),
    (init_position, pos6),
    (position_set_z, pos6, 260),
    (position_set_y, pos6, 600),
    (position_rotate_x, pos6, -80),
    (position_rotate_z, pos6, 180),
    (cur_tableau_set_camera_position, pos6),
    (copy_position, pos7, pos6),
    (position_rotate_x, pos7, -90),
    (position_rotate_z, pos7, 30),
    (position_rotate_x, pos7, -60),
    (cur_tableau_add_sun_light, pos7, 175, 150, 125),
  ]),

  ("retired_troop_alpha_mask", 0, "mat_troop_portrait_mask",  2048, 2048, 0, 0, 600, 600,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 8947848),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (cur_tableau_render_as_alpha_mask),
    (call_script, "script_add_troop_to_cur_tableau_for_retirement", ":var0"),
  ]),

  ("retired_troop_color", 0, "mat_troop_portrait_color",  2048, 2048, 0, 0, 600, 600,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4293383065),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (call_script, "script_add_troop_to_cur_tableau_for_retirement", ":var0"),
  ]),

  ("retirement_troop", 0, "tableau_with_transparency",  2048, 2048, 0, 0, 600, 600,
  [
    (store_script_param, ":var0", 1),
    (cur_tableau_set_background_color, 4287137928),
    (cur_tableau_set_ambient_light, 10, 11, 15),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_camera_parameters, 0, 40, 40, 0, 100000),
    (init_position, pos1),
    (position_set_z, pos1, 100),
    (position_set_x, pos1, -20),
    (position_set_y, pos1, -20),
    (cur_tableau_add_tableau_mesh, "tableau_retired_troop_color", ":var0", pos1, 0, 0),
    (position_set_z, pos1, 200),
    (cur_tableau_add_tableau_mesh, "tableau_retired_troop_alpha_mask", ":var0", pos1, 0, 0),
  ]),

  ("heraldic_cuir_bouilli_a", 0, "cuir_bouilli_a",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (call_script, "script_setup_heraldry", "mesh_camo_tableau_cuir_bouilli_a", ":var0", -71, 127, 80),
  ]),

  ("heraldic_brigandine_b", 0, "brigandine_b",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (call_script, "script_setup_heraldry", "mesh_camo_tableau_brigandine_b", ":var0", -59, 135, 87),
  ]),

  ("heraldic_brig_plate_black", 0, "brig_plate_black",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (call_script, "script_setup_heraldry", "mesh_camo_tableau_brig_plate_black", ":var0", -59, 135, 87),
  ]),

  ("heraldic_mail_long_surcoat", 0, "mail_long_surcoat",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (call_script, "script_setup_heraldry", "mesh_camo_tableau_mail_long_surcoat", ":var0", 54, 90, 90),
  ]),

  ("heraldic_corrazina", 0, "corrazina_grey",  1024, 1024, 0, 0, 0, 0,
  [
    (store_script_param, ":var0", 1),
    (call_script, "script_setup_heraldry", "mesh_tableau_mesh_cor_banner", ":var0", 18, 152, 95),
  ]),

]